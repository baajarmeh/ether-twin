!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Erebos={})}(this,function(t){"use strict";function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function s(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}function e(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}var r="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},c=[],a=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h=!1;function l(){h=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)c[e]=t[e],a[t.charCodeAt(e)]=e;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}function n(t){var e,r,n,o,i,u;h||l();var s=t.length;if(0<s%4)throw new Error("Invalid string. Length must be a multiple of 4");i="="===t[s-2]?2:"="===t[s-1]?1:0,u=new f(3*s/4-i),n=0<i?s-4:s;var c=0;for(r=e=0;e<n;e+=4,r+=3)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],u[c++]=o>>16&255,u[c++]=o>>8&255,u[c++]=255&o;return 2==i?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,u[c++]=255&o):1==i&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,u[c++]=o>>8&255,u[c++]=255&o),u}function p(t,e,r){for(var n,o,i=[],u=e;u<r;u+=3)n=(t[u]<<16)+(t[u+1]<<8)+t[u+2],i.push(c[(o=n)>>18&63]+c[o>>12&63]+c[o>>6&63]+c[63&o]);return i.join("")}function o(t){var e;h||l();for(var r=t.length,n=r%3,o="",i=[],u=0,s=r-n;u<s;u+=16383)i.push(p(t,u,s<u+16383?s:u+16383));return 1==n?(e=t[r-1],o+=c[e>>2],o+=c[e<<4&63],o+="=="):2==n&&(e=(t[r-2]<<8)+t[r-1],o+=c[e>>10],o+=c[e>>4&63],o+=c[e<<2&63],o+="="),i.push(o),i.join("")}function u(t,e,r,n,o){var i,u,s=8*o-n-1,c=(1<<s)-1,a=c>>1,f=-7,h=r?o-1:0,l=r?-1:1,p=t[e+h];for(h+=l,i=p&(1<<-f)-1,p>>=-f,f+=s;0<f;i=256*i+t[e+h],h+=l,f-=8);for(u=i&(1<<-f)-1,i>>=-f,f+=n;0<f;u=256*u+t[e+h],h+=l,f-=8);if(0===i)i=1-a;else{if(i===c)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,n),i-=a}return(p?-1:1)*u*Math.pow(2,i-n)}function d(t,e,r,n,o,i){var u,s,c,a=8*i-o-1,f=(1<<a)-1,h=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,u=f):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),2<=(e+=1<=u+h?l/c:l*Math.pow(2,1-h))*c&&(u++,c/=2),f<=u+h?(s=0,u=f):1<=u+h?(s=(e*c-1)*Math.pow(2,o),u+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,o),u=0));8<=o;t[r+p]=255&s,p+=d,s/=256,o-=8);for(u=u<<o|s,a+=o;0<a;t[r+p]=255&u,p+=d,u/=256,a-=8);t[r+p-d]|=128*y}var y={}.toString,b=Array.isArray||function(t){return"[object Array]"==y.call(t)};function v(){return w.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(t,e){if(v()<e)throw new RangeError("Invalid typed array length");return w.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=w.prototype:(null===t&&(t=new w(e)),t.length=e),t}function w(t,e,r){if(!(w.TYPED_ARRAY_SUPPORT||this instanceof w))return new w(t,e,r);if("number"!=typeof t)return g(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return E(this,t)}function g(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);w.TYPED_ARRAY_SUPPORT?(t=e).__proto__=w.prototype:t=S(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!w.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|O(e,r),o=(t=_(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(A(e)){var r=0|T(e.length);return 0===(t=_(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?_(t,0):S(t,e);if("Buffer"===e.type&&b(e.data))return S(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function E(t,e){if(m(e),t=_(t,e<0?0:0|T(e)),!w.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function S(t,e){var r=e.length<0?0:0|T(e.length);t=_(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function T(t){if(t>=v())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v().toString(16)+" bytes");return 0|t}function A(t){return!(null==t||!t._isBuffer)}function O(t,e){if(A(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(t).length;default:if(n)return K(t).length;e=(""+e).toLowerCase(),n=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function P(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=w.from(e,n)),A(e))return 0===e.length?-1:R(t,e,r,n,o);if("number"==typeof e)return e&=255,w.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):R(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function R(t,e,r,n,o){var i,u=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=u=2,c/=2,r/=2}function a(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}if(o){var f=-1;for(i=r;i<s;i++)if(a(t,i)===a(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===c)return f*u}else-1!==f&&(i-=i-f),f=-1}else for(s<r+c&&(r=s-c),i=r;0<=i;i--){for(var h=!0,l=0;l<c;l++)if(a(t,i+l)!==a(e,l)){h=!1;break}if(h)return i}return-1}function I(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?o<(n=Number(n))&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<n&&(n=i/2);for(var u=0;u<n;++u){var s=parseInt(e.substr(2*u,2),16);if(isNaN(s))return u;t[r+u]=s}return u}function k(t,e,r,n){return G(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function j(t,e,r){return 0===e&&r===t.length?o(t):o(t.slice(e,r))}function N(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,u,s,c,a=t[o],f=null,h=239<a?4:223<a?3:191<a?2:1;if(o+h<=r)switch(h){case 1:a<128&&(f=a);break;case 2:128==(192&(i=t[o+1]))&&127<(c=(31&a)<<6|63&i)&&(f=c);break;case 3:i=t[o+1],u=t[o+2],128==(192&i)&&128==(192&u)&&2047<(c=(15&a)<<12|(63&i)<<6|63&u)&&(c<55296||57343<c)&&(f=c);break;case 4:i=t[o+1],u=t[o+2],s=t[o+3],128==(192&i)&&128==(192&u)&&128==(192&s)&&65535<(c=(15&a)<<18|(63&i)<<12|(63&u)<<6|63&s)&&c<1114112&&(f=c)}null===f?(f=65533,h=1):65535<f&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=h}return function(t){var e=t.length;if(e<=U)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=U));return r}(n)}w.TYPED_ARRAY_SUPPORT=void 0===r.TYPED_ARRAY_SUPPORT||r.TYPED_ARRAY_SUPPORT,w.poolSize=8192,w._augment=function(t){return t.__proto__=w.prototype,t},w.from=function(t,e,r){return g(null,t,e,r)},w.TYPED_ARRAY_SUPPORT&&(w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array),w.alloc=function(t,e,r){return function(t,e,r,n){return m(e),e<=0?_(t,e):void 0!==r?"string"==typeof n?_(t,e).fill(r,n):_(t,e).fill(r):_(t,e)}(null,t,e,r)},w.allocUnsafe=function(t){return E(null,t)},w.allocUnsafeSlow=function(t){return E(null,t)},w.isBuffer=Z,w.compare=function(t,e){if(!A(t)||!A(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},w.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(t,e){if(!b(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return w.alloc(0);var r;if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;var n=w.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var i=t[r];if(!A(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},w.byteLength=O,w.prototype._isBuffer=!0,w.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},w.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},w.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},w.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?N(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return N(this,e,r);case"ascii":return B(this,e,r);case"latin1":case"binary":return C(this,e,r);case"base64":return j(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},w.prototype.equals=function(t){if(!A(t))throw new TypeError("Argument must be a Buffer");return this===t||0===w.compare(this,t)},w.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},w.prototype.compare=function(t,e,r,n,o){if(!A(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),u=(r>>>=0)-(e>>>=0),s=Math.min(i,u),c=this.slice(n,o),a=t.slice(e,r),f=0;f<s;++f)if(c[f]!==a[f]){i=c[f],u=a[f];break}return i<u?-1:u<i?1:0},w.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},w.prototype.indexOf=function(t,e,r){return P(this,t,e,r,!0)},w.prototype.lastIndexOf=function(t,e,r){return P(this,t,e,r,!1)},w.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i,u,s,c,a,f,h,l,p,d=!1;;)switch(n){case"hex":return I(this,t,e,r);case"utf8":case"utf-8":return l=e,p=r,G(K(t,(h=this).length-l),h,l,p);case"ascii":return k(this,t,e,r);case"latin1":case"binary":return k(this,t,e,r);case"base64":return c=this,a=e,f=r,G(Q(t),c,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=e,s=r,G(function(t,e){for(var r,n,o,i=[],u=0;u<t.length&&!((e-=2)<0);++u)r=t.charCodeAt(u),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,(i=this).length-u),i,u,s);default:if(d)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function B(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function C(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function D(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var o="",i=e;i<r;++i)o+=J(t[i]);return o}function M(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function z(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,r,n,o,i){if(!A(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function Y(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function H(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(t,e,r,n,o){return o||H(t,0,r,4),d(t,e,r,n,23,4),r+4}function W(t,e,r,n,o){return o||H(t,0,r,8),d(t,e,r,n,52,8),r+8}w.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),w.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=w.prototype;else{var o=e-t;r=new w(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},w.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||z(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},w.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||z(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},w.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},w.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},w.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},w.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},w.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},w.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||z(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},w.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||z(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},w.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},w.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},w.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},w.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},w.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},w.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),u(this,t,!0,23,4)},w.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),u(this,t,!1,23,4)},w.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),u(this,t,!0,52,8)},w.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),u(this,t,!1,52,8)},w.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||F(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},w.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||F(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},w.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,255,0),w.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},w.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Y(this,t,e,!0),e+2},w.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Y(this,t,e,!1),e+2},w.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},w.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},w.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);F(this,t,e,r,o-1,-o)}var i=0,u=1,s=0;for(this[e]=255&t;++i<r&&(u*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+r},w.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);F(this,t,e,r,o-1,-o)}var i=r-1,u=1,s=0;for(this[e+i]=255&t;0<=--i&&(u*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+r},w.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,127,-128),w.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},w.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Y(this,t,e,!0),e+2},w.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Y(this,t,e,!1),e+2},w.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),w.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},w.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),w.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},w.prototype.writeFloatLE=function(t,e,r){return V(this,t,e,!0,r)},w.prototype.writeFloatBE=function(t,e,r){return V(this,t,e,!1,r)},w.prototype.writeDoubleLE=function(t,e,r){return W(this,t,e,!0,r)},w.prototype.writeDoubleBE=function(t,e,r){return W(this,t,e,!1,r)},w.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;0<=o;--o)t[o+e]=this[o+r];else if(i<1e3||!w.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},w.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!w.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var u=A(t)?t:K(new w(t,n).toString()),s=u.length;for(i=0;i<r-e;++i)this[i+e]=u[i%s]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function J(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],u=0;u<n;++u){if(55295<(r=t.charCodeAt(u))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(u+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Q(t){return n(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function Z(t){return null!=t&&(!!t._isBuffer||X(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&X(t.slice(0,0))}(t))}function X(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t,e,r){return(rt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&et(o,r.prototype),o}).apply(null,arguments)}function nt(t){var r="function"==typeof Map?new Map:void 0;return(nt=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return rt(t,arguments,tt(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),et(e,t)})(t)}function ot(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ut(t,e,r){return e&&it(t.prototype,e),r&&it(t,r),t}function st(t){return t}function ct(t){return w.from(t.substr(2),"hex")}function at(t){return st("0x"+w.from(t).toString("hex"))}function ft(t){return new ht(t)}var ht=function(){function r(t){if(ot(this,"_input",void 0),ot(this,"_value",void 0),t instanceof r)return t;if(function(t){return"string"==typeof t&&"0x"===t.slice(0,2)}(t)){var e=st(t);this._input={type:"hex",value:e},this._value=e}else if("string"==typeof t)this._input={type:"string",value:t},this._value=at(t);else if(Array.isArray(t))this._input={type:"bytesArray",value:t},this._value=at(t);else if(Z(t))this._input={type:"buffer",value:t},this._value=at(t);else{if("object"!=typeof t)throw new Error("Invalid input");this._input={type:"object",value:t},this._value=at(JSON.stringify(t))}}var t=r.prototype;return t.equals=function(t){return new r(t).value===this._value},t.toBuffer=function(){switch(this._input.type){case"buffer":return this._input.value;case"bytesArray":case"string":return w.from(this._input.value);case"hex":return ct(this._input.value);case"object":return w.from(JSON.stringify(this._input.value));default:return w.alloc(0)}},t.toBytesArray=function(){return"bytesArray"===this._input.type?this._input.value:Array.from(this.toBuffer())},t.toObject=function(){return"object"===this._input.type?this._input.value:JSON.parse(this.toString())},t.toString=function(){switch(this._input.type){case"buffer":return this._input.value.toString();case"bytesArray":return w.from(this._input.value).toString();case"hex":return ct(this._input.value).toString();case"object":return JSON.stringify(this._input.value);case"string":return this._input.value;default:return""}},ut(r,[{key:"value",get:function(){return this._value}}]),r}(),lt=function(t,e){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function pt(t,e){function r(){this.constructor=t}lt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var dt=function(){return(dt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function yt(t){return"function"==typeof t}var bt=!1,vt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;bt=t},get useDeprecatedSynchronousErrorHandling(){return bt}};function _t(t){setTimeout(function(){throw t},0)}var wt={closed:!0,next:function(t){},error:function(t){if(vt.useDeprecatedSynchronousErrorHandling)throw t;_t(t)},complete:function(){}},gt=Array.isArray||function(t){return t&&"number"==typeof t.length};function mt(t){return null!==t&&"object"==typeof t}function Et(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}Et.prototype=Object.create(Error.prototype);var St=Et,Tt=function(){function s(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return s.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,r=this._unsubscribe,n=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof s)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o){t[o].remove(this)}if(yt(r))try{r.call(this)}catch(t){e=t instanceof St?At(t.errors):[t]}if(gt(n)){o=-1;for(var i=n.length;++o<i;){var u=n[o];if(mt(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof St?e=e.concat(At(t.errors)):e.push(t)}}}if(e)throw new St(e)}},s.prototype.add=function(t){var e=t;switch(typeof t){case"function":e=new s(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof s)){var r=e;(e=new s)._subscriptions=[r]}break;default:if(!t)return s.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=e._parentOrParents;if(null===n)e._parentOrParents=this;else if(n instanceof s){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},s.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},s.EMPTY=((t=new s).closed=!0,t),s}();function At(t){return t.reduce(function(t,e){return t.concat(e instanceof St?e.errors:e)},[])}var Ot="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),xt=function(o){function i(t,e,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=wt;break;case 1:if(!t){n.destination=wt;break}if("object"==typeof t){t instanceof i?(n.syncErrorThrowable=t.syncErrorThrowable,(n.destination=t).add(n)):(n.syncErrorThrowable=!0,n.destination=new Pt(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new Pt(n,t,e,r)}return n}return pt(i,o),i.prototype[Ot]=function(){return this},i.create=function(t,e,r){var n=new i(t,e,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i}(Tt),Pt=function(s){function t(t,e,r,n){var o,i=s.call(this)||this;i._parentSubscriber=t;var u=i;return yt(e)?o=e:e&&(o=e.next,r=e.error,n=e.complete,e!==wt&&(yt((u=Object.create(e)).unsubscribe)&&i.add(u.unsubscribe.bind(u)),u.unsubscribe=i.unsubscribe.bind(i))),i._context=u,i._next=o,i._error=r,i._complete=n,i}return pt(t,s),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;vt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=vt.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):_t(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;_t(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};vt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),vt.useDeprecatedSynchronousErrorHandling)throw t;_t(t)}},t.prototype.__tryOrSetError=function(e,t,r){if(!vt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return vt.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(_t(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(xt);var Rt="function"==typeof Symbol&&Symbol.observable||"@@observable";function It(){}var kt=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,o=function(t,e,r){if(t){if(t instanceof xt)return t;if(t[Ot])return t[Ot]()}return t||e||r?new xt(t,e,r):new xt(wt)}(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||vt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),vt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){vt.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(t){for(;t;){var e=t,r=e.closed,n=e.destination,o=e.isStopped;if(r||o)return!1;t=n&&n instanceof xt?n:null}return!0}(e)?console.warn(t):e.error(t)}},r.prototype.forEach=function(n,t){var o=this;return new(t=jt(t))(function(t,e){var r;r=o.subscribe(function(t){try{n(t)}catch(t){e(t),r&&r.unsubscribe()}},e,t)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[Rt]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:function(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:It}(t)(this)},r.prototype.toPromise=function(t){var n=this;return new(t=jt(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();function jt(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}function Nt(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}Nt.prototype=Object.create(Error.prototype);var Ut=Nt,Bt=function(n){function t(t,e){var r=n.call(this)||this;return r.subject=t,r.subscriber=e,r.closed=!1,r}return pt(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},t}(Tt),Ct=function(r){function t(t){var e=r.call(this,t)||this;return e.destination=t,e}return pt(t,r),t}(xt),Dt=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return pt(t,e),t.prototype[Ot]=function(){return new Ct(this)},t.prototype.lift=function(t){var e=new Mt(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new Ut;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},t.prototype.error=function(t){if(this.closed)throw new Ut;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Ut;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new Ut;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new Ut;return this.hasError?(t.error(this.thrownError),Tt.EMPTY):this.isStopped?(t.complete(),Tt.EMPTY):(this.observers.push(t),new Bt(this,t))},t.prototype.asObservable=function(){var t=new kt;return t.source=this,t},t.create=function(t,e){return new Mt(t,e)},t}(kt),Mt=function(n){function t(t,e){var r=n.call(this)||this;return r.destination=t,r.source=e,r}return pt(t,n),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Tt.EMPTY},t}(Dt),zt=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}return pt(t,n),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(function(r){function t(t,e){return r.call(this)||this}return pt(t,r),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(Tt)),Ft=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return pt(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),0<e?n.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,e){return 0<e||this.closed?n.prototype.execute.call(this,t,e):this._execute(t,e)},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?n.prototype.requestAsyncId.call(this,t,e,r):t.flush(this)},t}(zt),Yt=function(){function r(t,e){void 0===e&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},r.now=function(){return Date.now()},r}(),Lt=function(n){function o(t,e){void 0===e&&(e=Yt.now);var r=n.call(this,t,function(){return o.delegate&&o.delegate!==r?o.delegate.now():e()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return pt(o,n),o.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),o.delegate&&o.delegate!==this?o.delegate.schedule(t,e,r):n.prototype.schedule.call(this,t,e,r)},o.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},o}(Yt),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e}(Lt))(Ft),Vt=new kt(function(t){return t.complete()});function Wt(t){return t?function(e){return new kt(function(t){return e.schedule(function(){return t.complete()})})}(t):Vt}function qt(t){return t&&"function"==typeof t.schedule}var Jt=function(n){return function(t){for(var e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.complete()}};function Kt(n,o){return new kt(function(t){var e=new Tt,r=0;return e.add(o.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||e.add(this.schedule())):t.complete()})),e})}function Qt(t,e){return e?Kt(t,e):new kt(Jt(t))}function Gt(t){var e=t.error;t.subscriber.error(e)}var Zt=function(){function e(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},e.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return qt(r)?(t.pop(),Kt(t,r)):Qt(t)}(this.value);case"E":return function(e,r){return new kt(r?function(t){return r.schedule(Gt,0,{error:e,subscriber:t})}:function(t){return t.error(e)})}(this.error);case"C":return Wt()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Xt=function(o){function e(t,e,r){void 0===r&&(r=0);var n=o.call(this,t)||this;return n.scheduler=e,n.delay=r,n}return pt(e,o),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new $t(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(Zt.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(Zt.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(Zt.createComplete()),this.unsubscribe()},e}(xt),$t=function(){return function(t,e){this.notification=t,this.destination=e}}(),te=function(o){function t(t,e,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var n=o.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=t<1?1:t,n._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return pt(t,o),t.prototype.nextInfiniteTimeWindow=function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),o.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new ee(this._getNow(),t)),this._trimBufferThenGetEvents(),o.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=n.length;if(this.closed)throw new Ut;if(e=this.isStopped||this.hasError?Tt.EMPTY:(this.observers.push(t),new Bt(this,t)),o&&t.add(t=new Xt(t,o)),r)for(var u=0;u<i&&!t.closed;u++)t.next(n[u]);else for(u=0;u<i&&!t.closed;u++)t.next(n[u].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},t.prototype._getNow=function(){return(this.scheduler||Ht).now()},t.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,o=n.length,i=0;i<o&&!(t-n[i].time<r);)i++;return e<o&&(i=Math.max(i,o-e)),0<i&&n.splice(0,i),n},t}(Dt),ee=function(){return function(t,e){this.time=t,this.value=e}}(),re=new Lt(zt);function ne(t){return t}var oe=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new ie(t,this.project,this.thisArg))},t}(),ie=function(o){function t(t,e,r){var n=o.call(this,t)||this;return n.project=e,n.count=0,n.thisArg=r||n,n}return pt(t,o),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(xt),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(xt),se=function(o){function t(t,e,r){var n=o.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=r,n.index=0,n}return pt(t,o),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(xt);function ce(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var ae=ce(),fe=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function he(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var le=function(t){if(t&&"function"==typeof t[Rt])return function(r){return function(t){var e=r[Rt]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}(t);if(fe(t))return Jt(t);if(he(t))return function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,_t),e}}(t);if(t&&"function"==typeof t[ae])return function(n){return function(t){for(var e=n[ae]();;){var r=e.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t}}(t);var e=mt(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function pe(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[Rt]}(t))return function(n,o){return new kt(function(e){var r=new Tt;return r.add(o.schedule(function(){var t=n[Rt]();r.add(t.subscribe({next:function(t){r.add(o.schedule(function(){return e.next(t)}))},error:function(t){r.add(o.schedule(function(){return e.error(t)}))},complete:function(){r.add(o.schedule(function(){return e.complete()}))}}))})),r})}(t,e);if(he(t))return function(t,n){return new kt(function(e){var r=new Tt;return r.add(n.schedule(function(){return t.then(function(t){r.add(n.schedule(function(){e.next(t),r.add(n.schedule(function(){return e.complete()}))}))},function(t){r.add(n.schedule(function(){return e.error(t)}))})})),r})}(t,e);if(fe(t))return Kt(t,e);if(function(t){return t&&"function"==typeof t[ae]}(t)||"string"==typeof t)return function(e,r){if(!e)throw new Error("Iterable cannot be null");return new kt(function(n){var o,t=new Tt;return t.add(function(){o&&"function"==typeof o.return&&o.return()}),t.add(r.schedule(function(){o=e[ae](),t.add(r.schedule(function(){if(!n.closed){var t,e;try{var r=o.next();t=r.value,e=r.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),t})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function de(e,o,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof o?function(t){return t.pipe(de(function(r,n){return function(t,e){return e?pe(t,e):t instanceof kt?t:new kt(le(t))}(e(r,n)).pipe(function(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new oe(e,r))}}(function(t,e){return o(r,t,n,e)}))},r))}:("number"==typeof o&&(r=o),function(t){return t.lift(new ye(e,r))})}var ye=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new be(t,this.project,this.concurrent))},t}(),be=function(o){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=o.call(this,t)||this;return n.project=e,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return pt(t,o),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){var n=new se(this,void 0,void 0);this.destination.add(n),function(t,e,r,n,o){if(void 0===o&&(o=new se(t,r,n)),!o.closed)e instanceof kt?e.subscribe(o):le(e)(o)}(this,t,e,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(ue);function ve(e,r){return void 0===e&&(e=0),void 0===r&&(r=re),(!function(t){return!gt(t)&&0<=t-parseFloat(t)+1}(e)||e<0)&&(e=0),r&&"function"==typeof r.schedule||(r=re),new kt(function(t){return t.add(r.schedule(_e,e,{subscriber:t,counter:0,period:e})),t})}function _e(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function we(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,o=t[t.length-1];return qt(o)?(n=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof o&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof kt?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),de(ne,t)}(r)(Qt(t,n))}var ge=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new me(t,this.predicate,this.thisArg))},t}(),me=function(o){function t(t,e,r){var n=o.call(this,t)||this;return n.predicate=e,n.thisArg=r,n.count=0,n}return pt(t,o),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(xt);var Ee=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Se(t,this.compare,this.keySelector))},t}(),Se=function(o){function t(t,e,r){var n=o.call(this,t)||this;return n.keySelector=r,n.hasKey=!1,"function"==typeof e&&(n.compare=e),n}return pt(t,o),t.prototype.compare=function(t,e){return t===e},t.prototype._next=function(t){var e;try{var r=this.keySelector;e=r?r(t):t}catch(t){return this.destination.error(t)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))},t}(xt);function Te(){throw new Error("setTimeout has not been defined")}function Ae(){throw new Error("clearTimeout has not been defined")}var Oe=Te,xe=Ae;function Pe(e){if(Oe===setTimeout)return setTimeout(e,0);if((Oe===Te||!Oe)&&setTimeout)return Oe=setTimeout,setTimeout(e,0);try{return Oe(e,0)}catch(t){try{return Oe.call(null,e,0)}catch(t){return Oe.call(this,e,0)}}}"function"==typeof r.setTimeout&&(Oe=setTimeout),"function"==typeof r.clearTimeout&&(xe=clearTimeout);var Re,Ie=[],ke=!1,je=-1;function Ne(){ke&&Re&&(ke=!1,Re.length?Ie=Re.concat(Ie):je=-1,Ie.length&&Ue())}function Ue(){if(!ke){var t=Pe(Ne);ke=!0;for(var e=Ie.length;e;){for(Re=Ie,Ie=[];++je<e;)Re&&Re[je].run();je=-1,e=Ie.length}Re=null,ke=!1,function(e){if(xe===clearTimeout)return clearTimeout(e);if((xe===Ae||!xe)&&clearTimeout)return xe=clearTimeout,clearTimeout(e);try{xe(e)}catch(t){try{return xe.call(null,e)}catch(t){return xe.call(this,e)}}}(t)}}function Be(t,e){this.fun=t,this.array=e}Be.prototype.run=function(){this.fun.apply(null,this.array)};function Ce(){}var De=Ce,Me=Ce,ze=Ce,Fe=Ce,Ye=Ce,Le=Ce,He=Ce;var Ve=r.performance||{},We=Ve.now||Ve.mozNow||Ve.msNow||Ve.oNow||Ve.webkitNow||function(){return(new Date).getTime()};var qe=new Date;var Je={nextTick:function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ie.push(new Be(t,e)),1!==Ie.length||ke||Pe(Ue)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:De,addListener:Me,once:ze,off:Fe,removeListener:Ye,removeAllListeners:Le,emit:He,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*We.call(Ve),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-qe)/1e3}},Ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Qe(t){return st("0x"+w.from(t).toString("hex"))}function Ge(t,e){var r=ft(t.feed.topic).toBuffer();if(32!==r.length)throw new Error("Invalid topic length");var n=ft(t.feed.user).toBuffer();if(20!==n.length)throw new Error("Invalid user length");var o=w.alloc(8,0);o.writeInt8(t.protocolVersion,0);var i=w.alloc(7,0);i.writeUInt32LE(t.epoch.time,0);var u=w.alloc(1,0);return u.writeUInt8(t.epoch.level,0),function(t){return nr.keccak256.array(t)}(w.concat([o,r,n,i,u,ft(e).toBuffer()]))}function Ze(t){return t.ok?Promise.resolve(t):Promise.reject(new ir(t.status,t.statusText))}function Xe(t){return Ze(t).then(function(t){return t.json()})}function $e(t){return Ze(t).then(function(t){return t.text()})}function tr(t){return Ze(t).then(function(t){return t.arrayBuffer()}).then(function(t){return w.from(new Uint8Array(t)).toString("hex")})}function er(){return Promise.reject(new Error("Missing `signBytes()` function"))}var rr,nr=(function(k){!function(){var h="input is invalid type",t="object"==typeof window,e=t?window:{};e.JS_SHA3_NO_WINDOW&&(t=!1);var r=!t&&"object"==typeof self;!e.JS_SHA3_NO_NODE_JS&&"object"==typeof Je&&Je.versions&&Je.versions.node?e=Ke:r&&(e=self);var n=!e.JS_SHA3_NO_COMMON_JS&&k.exports,l=!e.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,c="0123456789abcdef".split(""),o=[4,1024,262144,67108864],p=[0,8,16,24],ft=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],i=[224,256,384,512],u=[128,256],s=["hex","buffer","arrayBuffer","array","digest"],a={128:168,256:136};!e.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!l||!e.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var f=function(e,r,n){return function(t){return new P(e,r,e).update(t)[n]()}},d=function(r,n,o){return function(t,e){return new P(r,n,e).update(t)[o]()}},y=function(o,t,i){return function(t,e,r,n){return g["cshake"+o].update(t,e,r,n)[i]()}},b=function(o,t,i){return function(t,e,r,n){return g["kmac"+o].update(t,e,r,n)[i]()}},v=function(t,e,r,n){for(var o=0;o<s.length;++o){var i=s[o];t[i]=e(r,n,i)}return t},_=function(t,e){var r=f(t,e,"hex");return r.create=function(){return new P(t,e,t)},r.update=function(t){return r.create().update(t)},v(r,f,t,e)},w=[{name:"keccak",padding:[1,256,65536,16777216],bits:i,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:i,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:u,createMethod:function(e,r){var n=d(e,r,"hex");return n.create=function(t){return new P(e,r,t)},n.update=function(t,e){return n.create(e).update(t)},v(n,d,e,r)}},{name:"cshake",padding:o,bits:u,createMethod:function(n,o){var i=a[n],u=y(n,0,"hex");return u.create=function(t,e,r){return e||r?new P(n,o,t).bytepad([e,r],i):g["shake"+n].create(t)},u.update=function(t,e,r,n){return u.create(e,r,n).update(t)},v(u,y,n,o)}},{name:"kmac",padding:o,bits:u,createMethod:function(n,o){var i=a[n],u=b(n,0,"hex");return u.create=function(t,e,r){return new R(n,o,e).bytepad(["KMAC",r],i).bytepad([t],i)},u.update=function(t,e,r,n){return u.create(t,r,n).update(e)},v(u,b,n,o)}}],g={},m=[],E=0;E<w.length;++E)for(var S=w[E],T=S.bits,A=0;A<T.length;++A){var O=S.name+"_"+T[A];if(m.push(O),g[O]=S.createMethod(T[A],S.padding),"sha3"!==S.name){var x=S.name+T[A];m.push(x),g[x]=g[O]}}function P(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function R(t,e,r){P.call(this,t,e,r)}P.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,r=typeof t;if("string"!=r){if("object"!=r)throw new Error(h);if(null===t)throw new Error(h);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(h);e=!0}for(var n,o,i=this.blocks,u=this.byteCount,s=t.length,c=this.blockCount,a=0,f=this.s;a<s;){if(this.reset)for(this.reset=!1,i[0]=this.block,n=1;n<c+1;++n)i[n]=0;if(e)for(n=this.start;a<s&&n<u;++a)i[n>>2]|=t[a]<<p[3&n++];else for(n=this.start;a<s&&n<u;++a)(o=t.charCodeAt(a))<128?i[n>>2]|=o<<p[3&n++]:(o<2048?i[n>>2]|=(192|o>>6)<<p[3&n++]:(o<55296||57344<=o?i[n>>2]|=(224|o>>12)<<p[3&n++]:(o=65536+((1023&o)<<10|1023&t.charCodeAt(++a)),i[n>>2]|=(240|o>>18)<<p[3&n++],i[n>>2]|=(128|o>>12&63)<<p[3&n++]),i[n>>2]|=(128|o>>6&63)<<p[3&n++]),i[n>>2]|=(128|63&o)<<p[3&n++]);if(u<=(this.lastByteIndex=n)){for(this.start=n-u,this.block=i[c],n=0;n<c;++n)f[n]^=i[n];I(f),this.reset=!0}else this.start=n}return this},P.prototype.encode=function(t,e){var r=255&t,n=1,o=[r];for(r=255&(t>>=8);0<r;)o.unshift(r),r=255&(t>>=8),++n;return e?o.push(n):o.unshift(n),this.update(o),o.length},P.prototype.encodeString=function(t){var e,r=typeof t;if("string"!=r){if("object"!=r)throw new Error(h);if(null===t)throw new Error(h);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(h);e=!0}var n=0,o=t.length;if(e)n=o;else for(var i=0;i<t.length;++i){var u=t.charCodeAt(i);u<128?n+=1:u<2048?n+=2:u<55296||57344<=u?n+=3:(u=65536+((1023&u)<<10|1023&t.charCodeAt(++i)),n+=4)}return n+=this.encode(8*n),this.update(t),n},P.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var o=e-r%e,i=[];return i.length=o,this.update(i),this},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];I(n)}},P.prototype.toString=P.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,i=0,u=0,s="";u<n;){for(i=0;i<e&&u<n;++i,++u)t=r[i],s+=c[t>>4&15]+c[15&t]+c[t>>12&15]+c[t>>8&15]+c[t>>20&15]+c[t>>16&15]+c[t>>28&15]+c[t>>24&15];u%e==0&&(I(r),i=0)}return o&&(t=r[i],s+=c[t>>4&15]+c[15&t],1<o&&(s+=c[t>>12&15]+c[t>>8&15]),2<o&&(s+=c[t>>20&15]+c[t>>16&15])),s},P.prototype.buffer=P.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,i=0,u=0,s=this.outputBits>>3;t=o?new ArrayBuffer(n+1<<2):new ArrayBuffer(s);for(var c=new Uint32Array(t);u<n;){for(i=0;i<e&&u<n;++i,++u)c[u]=r[i];u%e==0&&I(r)}return o&&(c[i]=r[i],t=t.slice(0,s)),t},P.prototype.digest=P.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,o=this.outputBlocks,i=this.extraBytes,u=0,s=0,c=[];s<o;){for(u=0;u<r&&s<o;++u,++s)t=s<<2,e=n[u],c[t]=255&e,c[t+1]=e>>8&255,c[t+2]=e>>16&255,c[t+3]=e>>24&255;s%r==0&&I(n)}return i&&(t=s<<2,e=n[u],c[t]=255&e,1<i&&(c[t+1]=e>>8&255),2<i&&(c[t+2]=e>>16&255)),c},(R.prototype=new P).finalize=function(){return this.encode(this.outputBits,!0),P.prototype.finalize.call(this)};var I=function(t){var e,r,n,o,i,u,s,c,a,f,h,l,p,d,y,b,v,_,w,g,m,E,S,T,A,O,x,P,R,I,k,j,N,U,B,C,D,M,z,F,Y,L,H,V,W,q,J,K,Q,G,Z,X,$,tt,et,rt,nt,ot,it,ut,st,ct,at;for(n=0;n<48;n+=2)o=t[0]^t[10]^t[20]^t[30]^t[40],i=t[1]^t[11]^t[21]^t[31]^t[41],u=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],a=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],h=t[7]^t[17]^t[27]^t[37]^t[47],e=(l=t[8]^t[18]^t[28]^t[38]^t[48])^(u<<1|s>>>31),r=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(s<<1|u>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=o^(c<<1|a>>>31),r=i^(a<<1|c>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=u^(f<<1|h>>>31),r=s^(h<<1|f>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=c^(l<<1|p>>>31),r=a^(p<<1|l>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=f^(o<<1|i>>>31),r=h^(i<<1|o>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,d=t[0],y=t[1],q=t[11]<<4|t[10]>>>28,J=t[10]<<4|t[11]>>>28,P=t[20]<<3|t[21]>>>29,R=t[21]<<3|t[20]>>>29,ut=t[31]<<9|t[30]>>>23,st=t[30]<<9|t[31]>>>23,L=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,U=t[2]<<1|t[3]>>>31,B=t[3]<<1|t[2]>>>31,b=t[13]<<12|t[12]>>>20,v=t[12]<<12|t[13]>>>20,K=t[22]<<10|t[23]>>>22,Q=t[23]<<10|t[22]>>>22,I=t[33]<<13|t[32]>>>19,k=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,at=t[43]<<2|t[42]>>>30,tt=t[5]<<30|t[4]>>>2,et=t[4]<<30|t[5]>>>2,C=t[14]<<6|t[15]>>>26,D=t[15]<<6|t[14]>>>26,_=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,G=t[34]<<15|t[35]>>>17,Z=t[35]<<15|t[34]>>>17,j=t[45]<<29|t[44]>>>3,N=t[44]<<29|t[45]>>>3,T=t[6]<<28|t[7]>>>4,A=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,nt=t[16]<<23|t[17]>>>9,M=t[26]<<25|t[27]>>>7,z=t[27]<<25|t[26]>>>7,g=t[36]<<21|t[37]>>>11,m=t[37]<<21|t[36]>>>11,X=t[47]<<24|t[46]>>>8,$=t[46]<<24|t[47]>>>8,V=t[8]<<27|t[9]>>>5,W=t[9]<<27|t[8]>>>5,O=t[18]<<20|t[19]>>>12,x=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,it=t[28]<<7|t[29]>>>25,F=t[38]<<8|t[39]>>>24,Y=t[39]<<8|t[38]>>>24,E=t[48]<<14|t[49]>>>18,S=t[49]<<14|t[48]>>>18,t[0]=d^~b&_,t[1]=y^~v&w,t[10]=T^~O&P,t[11]=A^~x&R,t[20]=U^~C&M,t[21]=B^~D&z,t[30]=V^~q&K,t[31]=W^~J&Q,t[40]=tt^~rt&ot,t[41]=et^~nt&it,t[2]=b^~_&g,t[3]=v^~w&m,t[12]=O^~P&I,t[13]=x^~R&k,t[22]=C^~M&F,t[23]=D^~z&Y,t[32]=q^~K&G,t[33]=J^~Q&Z,t[42]=rt^~ot&ut,t[43]=nt^~it&st,t[4]=_^~g&E,t[5]=w^~m&S,t[14]=P^~I&j,t[15]=R^~k&N,t[24]=M^~F&L,t[25]=z^~Y&H,t[34]=K^~G&X,t[35]=Q^~Z&$,t[44]=ot^~ut&ct,t[45]=it^~st&at,t[6]=g^~E&d,t[7]=m^~S&y,t[16]=I^~j&T,t[17]=k^~N&A,t[26]=F^~L&U,t[27]=Y^~H&B,t[36]=G^~X&V,t[37]=Z^~$&W,t[46]=ut^~ct&tt,t[47]=st^~at&et,t[8]=E^~d&b,t[9]=S^~y&v,t[18]=j^~T&O,t[19]=N^~A&x,t[28]=L^~U&C,t[29]=H^~B&D,t[38]=X^~V&q,t[39]=$^~W&J,t[48]=ct^~tt&rt,t[49]=at^~et&nt,t[0]^=ft[n],t[1]^=ft[n+1]};if(n)k.exports=g;else for(E=0;E<m.length;++E)e[m[E]]=g[m[E]]}()}(rr={exports:{}},rr.exports),rr.exports),or={default:"bzz:/",feed:"bzz-feed:/",immutable:"bzz-immutable:/",raw:"bzz-raw:/"},ir=function(n){function t(t,e){var r;return ot($(r=n.call(this,e)||this),"status",void 0),r.status=t,r}return e(t,n),t}(nt(Error)),ur=function(o){function t(t){var e,r=t.url,n=s(t,["url"]);return(e=o.call(this,i({},n,{url:new URL(r).href}))||this)._fetch=window.fetch.bind(window),e}return e(t,o),t.prototype.uploadDirectory=function(e,t){void 0===t&&(t={});var r=new FormData;if(Object.keys(e).forEach(function(t){r.append(t,new Blob([e[t].data],{type:e[t].contentType}),t)}),null!=t.defaultPath){var n=e[t.defaultPath];null!=n&&r.append("",new Blob([n.data],{type:n.contentType}),"")}return this._upload(r,t)},t}(function(){function t(t){ot(this,"_defaultTimeout",void 0),ot(this,"_fetch",void 0),ot(this,"_signBytes",void 0),ot(this,"_url",void 0);var e=t.url,r=t.timeout;this._defaultTimeout=r||0,this._signBytes=t.signBytes||er,this._url=e}var e=t.prototype;return e._fetchTimeout=function(n,t,o){var i=this;void 0===o&&(o={});var u=null==t.timeout?this._defaultTimeout:t.timeout;return null!=t.headers&&(o.headers=t.headers),0===u?this._fetch(n,o):new Promise(function(e,t){var r=setTimeout(function(){t(new Error("Timeout"))},u);i._fetch(n,o).then(function(t){clearTimeout(r),e(t)})})},e.sign=function(t,e){return this._signBytes(t,e).then(Qe)},e.getDownloadURL=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=!1);var n=r?or.raw:function(t){return t&&or[t]||or.default}(e.mode),o=""+this._url+n+t+"/";return null!=e.path&&(o+=e.path),"raw"===e.mode&&null!=e.contentType&&(o+="?content_type="+e.contentType),o},e.getUploadURL=function(t,e){void 0===t&&(t={}),void 0===e&&(e=!1);var r=this._url+or[e?"raw":"default"];return null!=t.manifestHash&&(r+=t.manifestHash+"/",null!=t.path&&(r+=t.path)),null!=t.defaultPath&&(r+="?defaultpath="+t.defaultPath),r},e.getFeedURL=function(n,t){var e=this._url+or.feed,r=[];return"string"==typeof n?e+=n+"/":r=Object.keys(n).reduce(function(t,e){var r=n[e];return null!=r&&t.push(e+"="+r),t},[]),null!=t&&r.push(t+"=1"),0<r.length?e+"?"+r.join("&"):e},e.hash=function(t,e){return void 0===e&&(e={}),this._fetchTimeout(this._url+"bzz-hash:/"+t,e).then($e)},e.list=function(t,e){void 0===e&&(e={});var r=this._url+"bzz-list:/"+t+"/";return null!=e.path&&(r+=e.path),this._fetchTimeout(r,e).then(Xe)},e._download=function(t,e){var r=this.getDownloadURL(t,e);return this._fetchTimeout(r,e).then(Ze)},e.download=function(t,e){return void 0===e&&(e={}),this._download(t,e)},e._upload=function(t,e,r){void 0===r&&(r=!1);var n=this.getUploadURL(e,r);return this._fetchTimeout(n,e,{body:t,method:"POST"}).then($e).then(st)},e.uploadFile=function(t,e){void 0===e&&(e={});var r="string"==typeof t?w.from(t):t,n=null==e.contentType;return null==e.headers&&(e.headers={}),e.headers["content-length"]=r.length,null==e.headers||null!=e.headers["content-type"]||n||(e.headers["content-type"]=e.contentType),this._upload(r,e,n)},e.uploadDirectory=function(t,e){return Promise.reject(new Error("Must be implemented in extending class"))},e.upload=function(t,e){return void 0===e&&(e={}),"string"==typeof t||Z(t)?this.uploadFile(t,e):this.uploadDirectory(t,e)},e.deleteResource=function(t,e,r){void 0===r&&(r={});var n=this.getUploadURL({manifestHash:t,path:e});return this._fetchTimeout(n,r,{method:"DELETE"}).then($e)},e.createFeedManifest=function(t,e){void 0===e&&(e={});var r={entries:[{contentType:"application/bzz-feed",mod_time:"0001-01-01T00:00:00Z",feed:{topic:function(t){var e=ft(t.topic||w.alloc(32));if(null==t.name)return e.value;var r=w.from(t.name),n=e.toBuffer(),o=Array(32).fill().map(function(t,e){return n[e]^r[e]});return Qe(o)}(t),user:t.user}}]};return this.uploadFile(JSON.stringify(r),e).then(st)},e.getFeedMetadata=function(t,e){void 0===e&&(e={});var r=this.getFeedURL(t,"meta");return this._fetchTimeout(r,e).then(Xe)},e.getFeedChunk=function(t,e){void 0===e&&(e={});var r=this.getFeedURL(t);return this._fetchTimeout(r,e).then(Ze)},e.getFeedContentHash=function(t,e){return void 0===e&&(e={}),this.getFeedChunk(t,e).then(tr)},e.getFeedContent=function(t,e){var r=this;return void 0===e&&(e={}),this.getFeedContentHash(t,{headers:e.headers,timeout:e.timeout}).then(function(t){return r.download(t,e)})},e.pollFeedChunk=function(t,e){var r,n=this,o=[];!1!==e.immediate&&o.push([0]),null!=e.trigger&&o.push(e.trigger);var i=[];if("error"===e.whenEmpty)i.push(de(function(){return n.getFeedChunk(t,e)}));else{var u=this.getFeedURL(t);i.push(de(function(){return n._fetchTimeout(u,e).then(function(t){return 404===t.status?null:t.ok?t:new ir(t.status,t.statusText)})})),"ignore"===e.whenEmpty&&i.push(function(e,r){return function(t){return t.lift(new ge(e,r))}}(function(t){return null!==t}))}return(r=we.apply(void 0,[ve(e.interval)].concat(o))).pipe.apply(r,i)},e.pollFeedContentHash=function(t,e){var r,n=[de(function(t){return null===t?Promise.resolve(null):tr(t)})];return e.changedOnly&&n.push(function(e,r){return function(t){return t.lift(new Ee(e,r))}}()),(r=this.pollFeedChunk(t,e)).pipe.apply(r,n)},e.pollFeedContent=function(t,e){var r=this;return this.pollFeedContentHash(t,e).pipe(de(function(t){return null===t?Promise.resolve(null):r.download(t,e)}))},e.postSignedFeedChunk=function(t,e,r){void 0===r&&(r={});var n=this.getFeedURL(t);return this._fetchTimeout(n,r,{method:"POST",body:e}).then(Ze)},e.postFeedChunk=function(r,t,n,e){var o=this,i=ft(t).toBuffer(),u=Ge(r,i);return this.sign(u,e).then(function(t){var e={user:r.feed.user,topic:r.feed.topic,time:r.epoch.time,level:r.epoch.level,signature:t};return o.postSignedFeedChunk(e,i,n)})},e.setFeedChunk=function(t,e,r,n){var o=this;return this.getFeedMetadata(t,r).then(function(t){return o.postFeedChunk(t,e,r,n)})},e.setFeedContentHash=function(t,e,r,n){var o=this;return this.getFeedMetadata(t,r).then(function(t){return o.postFeedChunk(t,"0x"+e,r,n)})},e.setFeedContent=function(t,e,r,n){var o=this;void 0===r&&(r={});var i=r,u=(i.contentType,s(i,["contentType"]));return Promise.all([this.upload(e,r),this.getFeedMetadata(t,u)]).then(function(t){var e=t[0],r=t[1];return o.postFeedChunk(r,"0x"+e,u,n).then(function(){return e})})},t}());function sr(t){return"function"==typeof t}var cr=!1,ar={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;cr=t},get useDeprecatedSynchronousErrorHandling(){return cr}};function fr(t){setTimeout(function(){throw t},0)}var hr={closed:!0,next:function(t){},error:function(t){if(ar.useDeprecatedSynchronousErrorHandling)throw t;fr(t)},complete:function(){}},lr=Array.isArray||function(t){return t&&"number"==typeof t.length};function pr(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}pr.prototype=Object.create(Error.prototype);var dr=pr,yr=function(){function c(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return c.prototype.unsubscribe=function(){var e;if(!this.closed){var t,r=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof c)r.remove(this);else if(null!==r)for(var i=0;i<r.length;++i){r[i].remove(this)}if(sr(n))try{n.call(this)}catch(t){e=t instanceof dr?br(t.errors):[t]}if(lr(o)){i=-1;for(var u=o.length;++i<u;){var s=o[i];if(null!==(t=s)&&"object"==typeof t)try{s.unsubscribe()}catch(t){e=e||[],t instanceof dr?e=e.concat(br(t.errors)):e.push(t)}}}if(e)throw new dr(e)}},c.prototype.add=function(t){var e=t;if(!t)return c.EMPTY;switch(typeof t){case"function":e=new c(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof c)){var r=e;(e=new c)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=e._parentOrParents;if(null===n)e._parentOrParents=this;else if(n instanceof c){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},c.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},c.EMPTY=((t=new c).closed=!0,t),c}();function br(t){return t.reduce(function(t,e){return t.concat(e instanceof dr?e.errors:e)},[])}var vr="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),_r=function(o){function i(t,e,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=hr;break;case 1:if(!t){n.destination=hr;break}if("object"==typeof t){t instanceof i?(n.syncErrorThrowable=t.syncErrorThrowable,(n.destination=t).add(n)):(n.syncErrorThrowable=!0,n.destination=new wr(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new wr(n,t,e,r)}return n}return pt(i,o),i.prototype[vr]=function(){return this},i.create=function(t,e,r){var n=new i(t,e,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i}(yr),wr=function(s){function t(t,e,r,n){var o,i=s.call(this)||this;i._parentSubscriber=t;var u=i;return sr(e)?o=e:e&&(o=e.next,r=e.error,n=e.complete,e!==hr&&(sr((u=Object.create(e)).unsubscribe)&&i.add(u.unsubscribe.bind(u)),u.unsubscribe=i.unsubscribe.bind(i))),i._context=u,i._next=o,i._error=r,i._complete=n,i}return pt(t,s),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;ar.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=ar.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):fr(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;fr(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};ar.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),ar.useDeprecatedSynchronousErrorHandling)throw t;fr(t)}},t.prototype.__tryOrSetError=function(e,t,r){if(!ar.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return ar.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(fr(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(_r);var gr="function"==typeof Symbol&&Symbol.observable||"@@observable";function mr(){}var Er=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,o=function(t,e,r){if(t){if(t instanceof _r)return t;if(t[vr])return t[vr]()}return t||e||r?new _r(t,e,r):new _r(hr)}(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||ar.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),ar.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){ar.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(t){for(;t;){var e=t,r=e.closed,n=e.destination,o=e.isStopped;if(r||o)return!1;t=n&&n instanceof _r?n:null}return!0}(e)?console.warn(t):e.error(t)}},r.prototype.forEach=function(n,t){var o=this;return new(t=Sr(t))(function(t,e){var r;r=o.subscribe(function(t){try{n(t)}catch(t){e(t),r&&r.unsubscribe()}},e,t)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[gr]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:function(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:mr}(t)(this)},r.prototype.toPromise=function(t){var n=this;return new(t=Sr(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();function Sr(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var Tr=st("0x"),Ar=function(){function t(t){if(ot(this,"_rpc",void 0),!t.canSubscribe)throw new Error("Invalid RPC instance provided: must support subscriptions");this._rpc=t}var e=t.prototype;return e.baseAddr=function(){return this._rpc.request("pss_baseAddr").then(st)},e.getPublicKey=function(){return this._rpc.request("pss_getPublicKey").then(st)},e.sendAsym=function(t,e,r){return this._rpc.request("pss_sendAsym",[t,e,ft(r).value])},e.sendSym=function(t,e,r){return this._rpc.request("pss_sendSym",[t,e,ft(r).value])},e.sendRaw=function(t,e,r){return void 0===t&&(t=Tr),this._rpc.request("pss_sendRaw",[t,e,ft(r).value])},e.setPeerPublicKey=function(t,e,r){return void 0===r&&(r=Tr),this._rpc.request("pss_setPeerPublicKey",[t,e,r])},e.setSymmetricKey=function(t,e,r,n){return void 0===r&&(r=Tr),void 0===n&&(n=!1),this._rpc.request("pss_setSymmetricKey",[t,e,r,n])},e.stringToTopic=function(t){return this._rpc.request("pss_stringToTopic",[t]).then(st)},e.subscribeTopic=function(t,e){return void 0===e&&(e=!1),this._rpc.request("pss_subscribe",["receive",t,e,!1]).then(st)},e.createSubscription=function(n){var t=this;return Er.create(function(r){return t._rpc.subscribe({next:function(t){if("pss_subscription"===t.method&&null!=t.params&&t.params.subscription===n){var e=t.params.result;if(null!=e)try{r.next({key:e.Key&&e.Key.length?e.Key:void 0,msg:ft(e.Msg)})}catch(t){console.warn("Error handling message",e,t)}}},error:function(t){r.error(t)},complete:function(){r.complete()}})})},e.createTopicSubscription=function(t,e){var r=this;return this.subscribeTopic(t,e).then(function(t){return r.createSubscription(t)})},t}();function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xr,Pr,Rr,Ir=self.crypto||self.msCrypto,kr=function(){function t(t){void 0===t&&(t=!1),function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"_canSubscribe",void 0),this._canSubscribe=t}return t.prototype.createId=function(){return function(t){t=t||21;for(var e="",r=Ir.getRandomValues(new Uint8Array(t));0<t--;)e+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&r[t]];return e}()},function(t,e,r){e&&Or(t.prototype,e),r&&Or(t,r)}(t,[{key:"canSubscribe",get:function(){return!0===this._canSubscribe}}]),t}();function jr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nr(t){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Br(t,e,r){return(Br=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&Ur(o,r.prototype),o}).apply(null,arguments)}function Cr(t){var r="function"==typeof Map?new Map:void 0;return(Cr=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return Br(t,arguments,Nr(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Ur(e,t)})(t)}function Dr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}(Rr=Pr||(Pr={}))[Rr.PARSE_ERROR=-32700]="PARSE_ERROR",Rr[Rr.INVALID_REQUEST=-32600]="INVALID_REQUEST",Rr[Rr.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",Rr[Rr.INVALID_PARAMS=-32602]="INVALID_PARAMS",Rr[Rr.INTERNAL_ERROR=-32603]="INTERNAL_ERROR";var Mr=((xr={})[Pr.PARSE_ERROR]="Parse error",xr[Pr.INVALID_REQUEST]="Invalid request",xr[Pr.METHOD_NOT_FOUND]="Method not found",xr[Pr.INVALID_PARAMS]="Invalid params",xr[Pr.INTERNAL_ERROR]="Internal error",xr);var zr=function(o){function e(t,e,r){var n;return Dr(jr(n=o.call(this)||this),"code",void 0),Dr(jr(n),"data",void 0),Dr(jr(n),"message",void 0),n.code=t,n.data=r,n.message=e||function(t){return Mr[t]||(function(t){return t<=-32e3&&-32099<=t}(t)?"Server error":"Application error")}(t),n}return function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,o),e.fromObject=function(t){return new e(t.code,t.message,t.data)},e.prototype.toObject=function(){return{code:this.code,data:this.data,message:this.message}},e}(Cr(Error));function Fr(e){var r=Mr[e];return function(t){return new zr(e,r,t)}}Fr(Pr.PARSE_ERROR),Fr(Pr.INVALID_REQUEST),Fr(Pr.METHOD_NOT_FOUND),Fr(Pr.INVALID_PARAMS),Fr(Pr.INTERNAL_ERROR);var Yr=function(r){function t(t){var e;return function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e=r.call(this,!1)||this),"_fetch",void 0),e._fetch=t,e}return function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(t,r),t.prototype.request=function(t,e){return this._fetch({id:this.createId(),jsonrpc:"2.0",method:t,params:e}).then(function(t){if(t.error)throw zr.fromObject(t.error);return t.result})},t}(kr);function Lr(t){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vr(t,e,r){return(Vr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&Hr(o,r.prototype),o}).apply(null,arguments)}function Wr(t){var r="function"==typeof Map?new Map:void 0;return(Wr=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return Vr(t,arguments,Lr(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Hr(e,t)})(t)}var qr={Accept:"application/json","Content-Type":"application/json"},Jr="POST",Kr=function(n){function t(t,e){var r;return function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r=n.call(this,e)||this),"status",void 0),r.status=t,r}return function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(t,n),t}(Wr(Error));function Qr(t){return t.ok?Promise.resolve(t):Promise.reject(new Kr(t.status,t.statusText))}function Gr(t){return new Yr(function(r){return function(t){var e={body:JSON.stringify(t),headers:qr,method:Jr};return fetch(r,e).then(Qr).then(function(t){return t.json()})}}(t))}function Zr(t,e){return(Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xr(t,e,r){return(Xr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&Zr(o,r.prototype),o}).apply(null,arguments)}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function en(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rn=function(r){function t(t){var e;return en(tn(e=r.call(this,!0)||this),"_observers",void 0),en(tn(e),"_subscribers",void 0),en(tn(e),"_subscription",void 0),en(tn(e),"_transport",void 0),e._observers=new Map,e._subscribers=new Set,e._transport=t,e.connect(),e}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(t,r);var e=t.prototype;return e.connect=function(){var r,n=this;if(!this.connected&&(this._subscription=this._transport.subscribe({next:function(e){if(null==e.id)n._subscribers.forEach(function(t){t.next(e)});else{var t=n._observers.get(String(e.id));if(null!=t)if(null!=e.error){var r=zr.fromObject(e.error);t.error(r),null!=e.id&&n._observers.delete(String(e.id))}else t.next(e.result);else console.warn("Missing observer for message ID:",e.id)}},error:function(t){var e;e=t instanceof Error?t:new Error("Connection failed"),r=e,n._observers.forEach(function(t){t.error(e)}),n._observers.clear(),n._subscribers.forEach(function(t){t.error(e)}),n._subscribers.clear()},complete:function(){n._observers.forEach(function(t){t.complete()}),n._observers.clear(),n._subscribers.forEach(function(t){t.complete()}),n._subscribers.clear()}}),null!=r))throw r},e.disconnect=function(){this._transport.complete()},e.observe=function(n,o){var i=this;return kt.create(function(t){var e=i.createId(),r={jsonrpc:"2.0",method:n,id:e,params:o};return i._observers.set(e,new xt(t)),i._transport.next(r),function(){i._observers.delete(e)}})},e.request=function(t,o){var i=this;return new Promise(function(e,r){if(i.connected)var n=i.observe(t,o).subscribe(function(t){n.unsubscribe(),e(t)},function(t){n.unsubscribe(),r(t)},function(){n.unsubscribe()});else r(new Error("Not connected"))})},e.notify=function(t,e){this._transport.next({jsonrpc:"2.0",method:t,params:e})},e.subscribe=function(){var t=this;if(!this.connected)throw new Error("Not connected");for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=Xr(xt,r);return this._subscribers.add(o),function(){t._subscribers.delete(o)}},function(t,e,r){e&&$r(t.prototype,e),r&&$r(t,r)}(t,[{key:"connected",get:function(){return null!=this._subscription&&!this._subscription.closed}}]),t}(kr),nn={url:"",deserializer:function(t){return JSON.parse(t.data)},serializer:function(t){return JSON.stringify(t)}},on=function(i){function r(t,e){var r=i.call(this)||this;if(t instanceof kt)r.destination=e,r.source=t;else{var n=r._config=dt({},nn);if(r._output=new Dt,"string"==typeof t)n.url=t;else for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);if(!n.WebSocketCtor&&WebSocket)n.WebSocketCtor=WebSocket;else if(!n.WebSocketCtor)throw new Error("no WebSocket constructor can be found");r.destination=new te}return r}return pt(r,i),r.prototype.lift=function(t){var e=new r(this._config,this.destination);return e.operator=t,e.source=this,e},r.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new te),this._output=new Dt},r.prototype.multiplex=function(r,n,o){var i=this;return new kt(function(e){try{i.next(r())}catch(t){e.error(t)}var t=i.subscribe(function(t){try{o(t)&&e.next(t)}catch(t){e.error(t)}},function(t){return e.error(t)},function(){return e.complete()});return function(){try{i.next(n())}catch(t){e.error(t)}t.unsubscribe()}})},r.prototype._connectSocket=function(){var n=this,t=this._config,e=t.WebSocketCtor,r=t.protocol,o=t.url,i=t.binaryType,u=this._output,s=null;try{s=r?new e(o,r):new e(o),this._socket=s,i&&(this._socket.binaryType=i)}catch(t){return void u.error(t)}var c=new Tt(function(){n._socket=null,s&&1===s.readyState&&s.close()});s.onopen=function(t){if(!n._socket)return s.close(),void n._resetState();var e=n._config.openObserver;e&&e.next(t);var r=n.destination;n.destination=xt.create(function(t){if(1===s.readyState)try{var e=n._config.serializer;s.send(e(t))}catch(t){n.destination.error(t)}},function(t){var e=n._config.closingObserver;e&&e.next(void 0),t&&t.code?s.close(t.code,t.reason):u.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),n._resetState()},function(){var t=n._config.closingObserver;t&&t.next(void 0),s.close(),n._resetState()}),r&&r instanceof te&&c.add(r.subscribe(n.destination))},s.onerror=function(t){n._resetState(),u.error(t)},s.onclose=function(t){n._resetState();var e=n._config.closeObserver;e&&e.next(t),t.wasClean?u.complete():u.error(t)},s.onmessage=function(t){try{var e=n._config.deserializer;u.next(e(t))}catch(t){u.error(t)}}},r.prototype._subscribe=function(t){var e=this,r=this.source;return r?r.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add(function(){var t=e._socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())}),t)},r.prototype.unsubscribe=function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),i.prototype.unsubscribe.call(this)},r}(Mt);function un(t){return new rn(function(t){return new on({url:t})}(t))}var sn=/^https?:\/\//i,cn=/^wss?:\/\//i,an=un;function fn(t){if(sn.test(t))return Gr(t);if(cn.test(t))return un(t);throw new Error("Invalid endpoint provided: expecting HTTP or WebSocket URL")}var hn,ln=(hn=fn,function(t,e){if(null!=t)return t instanceof e?t:new e(hn(t))}),pn=function(r){function t(t){var e;return null==t.rpc&&null!=t.ws&&(t.rpc=an(t.ws)),ot($(e=r.call(this,t)||this),"_bzz",void 0),ot($(e),"_pss",void 0),null!=t.bzz?t.bzz instanceof ur?e._bzz=t.bzz:e._bzz=new ur(t.bzz):"string"==typeof t.http&&(e._bzz=new ur({url:t.http})),e._pss=ln(t.pss,Ar),e}return e(t,r),ut(t,[{key:"bzz",get:function(){if(null==this._bzz)throw new Error("Missing Bzz instance or HTTP URL");return this._bzz}},{key:"pss",get:function(){return null==this._pss&&(this._pss=new Ar(this.rpc)),this._pss}}]),t}(function(){function t(t){void 0===t&&(t={}),ot(this,"_rpc",void 0),this._rpc=t.rpc}return t.prototype.disconnect=function(){null!=this._rpc&&"function"==typeof this._rpc.disconnect&&this._rpc.disconnect()},ut(t,[{key:"rpc",get:function(){if(null==this._rpc)throw new Error("Could not access RPC: missing in configuration provided to client");return this._rpc}}]),t}());t.BzzAPI=ur,t.Hex=ht,t.PssAPI=Ar,t.SwarmClient=pn,t.createHex=ft,t.createRPC=fn,t.hexValueType=st,Object.defineProperty(t,"__esModule",{value:!0})});
